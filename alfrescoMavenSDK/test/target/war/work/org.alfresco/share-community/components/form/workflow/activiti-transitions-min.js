(function(){var f=YAHOO.util.Dom,i=YAHOO.util.Event;var d=Alfresco.util.encodeHTML;Alfresco.ActivitiTransitions=function(j){Alfresco.ActivitiTransitions.superclass.constructor.call(this,"Alfresco.ActivitiTransitions",j,["button","container"]);return this};YAHOO.extend(Alfresco.ActivitiTransitions,Alfresco.component.Base,{options:{currentValue:"",hiddenFieldName:"",transitions:null},onReady:function a(){this._processTransitions();this._generateTransitionButtons()},onClick:function c(m,n){var l=n.get("id");var k=l.substring(this.id.length+1);var j=this._getHiddenField();f.setAttribute(j,"value",k);if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Set transitions hidden field to: "+k)}Alfresco.util.submitForm(n.getForm())},_processTransitions:function h(){this.options.transitions=[];if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Processing transitions for field '"+this.id+"': "+this.options.currentValue)}if(this.options.currentValue!==null&&this.options.currentValue.length>0){var m=this.options.currentValue.split("#alf#");for(var k=0,l=m.length;k<l;k++){var j=m[k].split("|");this.options.transitions.push({id:j[0],label:j[1]})}}if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Built transitions list: "+YAHOO.lang.dump(this.options.transitions))}},_generateTransitionButtons:function g(){for(var j=0,k=this.options.transitions.length;j<k;j++){this._generateTransitionButton(this.options.transitions[j])}},_generateTransitionButton:function e(k){var j=document.createElement("input");j.setAttribute("id",this.id+"-"+k.id);j.setAttribute("value",k.label);j.setAttribute("type","button");f.get(this.id+"-buttons").appendChild(j);var j=Alfresco.util.createYUIButton(this,k.id,this.onClick);YAHOO.Bubbling.fire("addSubmitElement",j)},_getHiddenField:function b(){var j=f.get(this.id+"-hidden");if(j===null){j=document.createElement("input");j.setAttribute("id",this.id+"-hidden");j.setAttribute("type","hidden");j.setAttribute("name",this.options.hiddenFieldName);f.get(this.id).appendChild(j)}return j}})})();