(function(){Alfresco.module.DataListActions=function(){this.name="Alfresco.module.DataListActions";Alfresco.util.YUILoaderHelper.require(["json"],this.onComponentsLoaded,this);return this};Alfresco.module.DataListActions.prototype={isReady:false,defaultConfig:{method:"POST",urlStem:Alfresco.constants.PROXY_URI+"slingshot/datalists/action/",dataObj:null,successCallback:null,successMessage:null,failureCallback:null,failureMessage:null,object:null},onComponentsLoaded:function a(){this.isReady=true},_runAction:function b(e,f){if(!this.isReady){return false}if(typeof f=="object"){e=YAHOO.lang.merge(e,f)}if(e.method==Alfresco.util.Ajax.DELETE){if(e.dataObj!==null){e.method=Alfresco.util.Ajax.POST;if(e.url.indexOf("alf_method")<1){e.url+=(e.url.indexOf("?")<0?"?":"&")+"alf_method=delete"}Alfresco.util.Ajax.jsonRequest(e)}else{Alfresco.util.Ajax.request(e)}}else{Alfresco.util.Ajax.jsonRequest(e)}},genericAction:function d(l){var q="",p=l.success,g=l.failure,f=l.webscript,k=l.params?l.params:l.webscript.params,j=l.config,n=l.wait,i=null;var m=function o(t,u){if(u){if(u.event&&u.event.name){YAHOO.Bubbling.fire(u.event.name,u.event.obj)}if(YAHOO.lang.isArray(u.events)){for(var r=0,s=u.events.length;r<s;r++){YAHOO.Bubbling.fire(u.events[r].name,u.events[r].obj)}}if(u.popup){u.popup.destroy()}if(u.message){Alfresco.util.PopupManager.displayMessage({text:u.message})}if(u.callback&&u.callback.fn){u.callback.fn.call((typeof u.callback.scope=="object"?u.callback.scope:this),{config:t.config,json:t.json,serverResponse:t.serverResponse},u.callback.obj)}}};if(n&&n.message){if(typeof p!="object"){p={}}if(typeof g!="object"){g={}}p.popup=Alfresco.util.PopupManager.displayMessage({modal:true,displayTime:0,text:n.message,effect:null});g.popup=p.popup}var e;if(f.stem){e=f.stem+f.name}else{e=this.defaultConfig.urlStem+f.name}if(k){e=YAHOO.lang.substitute(e,k);i=k}if(f.queryString){e+="?"+f.queryString}var h=YAHOO.lang.merge(this.defaultConfig,{successCallback:{fn:m,scope:this,obj:p},successMessage:null,failureCallback:{fn:m,scope:this,obj:g},failureMessage:null,url:e,method:f.method,responseContentType:Alfresco.util.Ajax.JSON,object:i});return this._runAction(h,j)}};var c=new Alfresco.module.DataListActions()})();