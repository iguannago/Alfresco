Alfresco.WebPreview.prototype.Plugins.WebPreviewer=function(b,a){this.wp=b;this.attributes=YAHOO.lang.merge(Alfresco.util.deepCopy(this.attributes),a);this.swfDiv=null;return this};Alfresco.WebPreview.prototype.Plugins.WebPreviewer.prototype={attributes:{src:null,paging:"false",disableI18nInputFix:"false",showFullScreenButton:"true",showFullWindowButton:"true"},swfDiv:null,report:function WebPreviewer_report(){if(!Alfresco.util.hasRequiredFlashPlayer(9,0,124)){return this.wp.msg("label.noFlash")}},display:function WebPreviewer_display(){var a=this.resolveUrls();this.createSwfDiv();var b="WebPreviewer_"+this.wp.id;var c=new YAHOO.deconcept.SWFObject(Alfresco.constants.URL_CONTEXT+"components/preview/WebPreviewer.swf",b,"100%","100%","9.0.45");c.addVariable("fileName",this.wp.options.name);c.addVariable("paging",this.attributes.paging);c.addVariable("url",a.url);c.addVariable("jsCallback","Alfresco.util.ComponentManager.get('"+this.wp.id+"').plugin.onWebPreviewerEvent");c.addVariable("jsLogger","Alfresco.util.ComponentManager.get('"+this.wp.id+"').plugin.onWebPreviewerLogging");c.addVariable("i18n_actualSize",this.wp.msg("preview.actualSize"));c.addVariable("i18n_fitPage",this.wp.msg("preview.fitPage"));c.addVariable("i18n_fitWidth",this.wp.msg("preview.fitWidth"));c.addVariable("i18n_fitHeight",this.wp.msg("preview.fitHeight"));c.addVariable("i18n_fullscreen",this.wp.msg("preview.fullscreen"));c.addVariable("i18n_fullwindow",this.wp.msg("preview.fullwindow"));c.addVariable("i18n_fullwindow_escape",this.wp.msg("preview.fullwindowEscape"));c.addVariable("i18n_page",this.wp.msg("preview.page"));c.addVariable("i18n_pageOf",this.wp.msg("preview.pageOf"));c.addVariable("show_fullscreen_button",this.attributes.showFullScreenButton);c.addVariable("show_fullwindow_button",this.attributes.showFullWindowButton);c.addVariable("disable_i18n_input_fix",this.disableI18nInputFix());c.addParam("allowScriptAccess","sameDomain");c.addParam("allowFullScreen","true");c.addParam("wmode","transparent");c.write(this.swfDiv.get("id"));YAHOO.util.Event.addListener(b,"mouseover",function(f){var d=YAHOO.util.Dom.get(b);if(d&&YAHOO.lang.isFunction(d.setMode)){YAHOO.util.Dom.get(b).setMode("active")}});YAHOO.util.Event.addListener(b,"mouseout",function(f){var d=YAHOO.util.Dom.get(b);if(d&&YAHOO.lang.isFunction(d.setMode)){YAHOO.util.Dom.get(b).setMode("inactive")}});YAHOO.util.Event.addListener(window,"resize",function(){if(this.swfDiv.getStyle("height")!=="100%"){this.synchronizeSwfDivPosition()}},this,true);this.synchronizeSwfDivPosition()},resolveUrls:function WebPreviewer_resolveUrls(){return{url:this.attributes.src?this.wp.getThumbnailUrl(this.attributes.src):this.wp.getContentUrl()}},onWebPreviewerLogging:function WebPreviewer_onWebPreviewerLogging(a,b){if(YAHOO.lang.isFunction(Alfresco.logger[b])){Alfresco.logger[b].call(Alfresco.logger,"WebPreviewer: "+a)}},onWebPreviewerEvent:function WebPreviewer_onWebPreviewerEvent(b){if(b.event){if(b.event.type=="onFullWindowClick"){var c=YAHOO.util.Dom.getClientRegion();this.swfDiv.setStyle("left",c.left+"px");this.swfDiv.setStyle("top",c.top+"px");this.swfDiv.setStyle("width","100%");this.swfDiv.setStyle("height","100%")}else{if(b.event.type=="onFullWindowEscape"){this.synchronizeSwfDivPosition()}}}else{if(b.error){var a="Error";if(b.error.code){a=this.wp.msg("error."+b.error.code)}Alfresco.util.PopupManager.displayMessage({text:a})}}},disableI18nInputFix:function WebPreviewer__resolvePreview(a){return this.attributes.disableI18nInputFix},createSwfDiv:function WebPreviewer_createSwfDiv(){if(!this.swfDiv){var a=new YAHOO.util.Element(document.createElement("div"));a.set("id",this.wp.id+"-full-window-div");a.setStyle("position","absolute");a.addClass("web-preview");a.addClass("real");a.appendTo(document.body);this.swfDiv=a}},synchronizeSwfDivPosition:function WebPreviewer_synchronizePosition(){var a=new YAHOO.util.Element(this.wp.getPreviewerElement());var b=YAHOO.util.Dom.getRegion(a.get("id"));this.swfDiv.setStyle("left",b.left+"px");this.swfDiv.setStyle("top",b.top+"px");this.swfDiv.setStyle("width",b.width+"px");this.swfDiv.setStyle("height",b.height+"px")}};