(function(){var c=YAHOO.util.Dom;var a=Alfresco.util.encodeHTML,e=Alfresco.util.combinePaths,f=Alfresco.util.siteURL;Alfresco.FolderActions=function(h){Alfresco.FolderActions.superclass.constructor.call(this,"Alfresco.FolderActions",h,["button"]);this.actionsView="details";YAHOO.Bubbling.on("filesPermissionsUpdated",this.doRefresh,this);YAHOO.Bubbling.on("registerAction",this.onRegisterAction,this);return this};YAHOO.extend(Alfresco.FolderActions,Alfresco.component.Base);YAHOO.lang.augmentProto(Alfresco.FolderActions,Alfresco.doclib.Actions);YAHOO.lang.augmentObject(Alfresco.FolderActions.prototype,{options:{nodeRef:null,siteId:null,containerId:"documentLibrary",replicationUrlMapping:{},folderDetails:null,repositoryBrowsing:true},recordData:null,doclistMetadata:null,currentPath:null,onReady:function g(){var q=this;this.recordData=this.options.folderDetails.item;this.doclistMetadata=this.options.folderDetails.metadata;this.currentPath=this.recordData.location.path;this.recordData.jsNode=new Alfresco.util.Node(this.recordData.node);var n=this.recordData,h=n.node,j=n.actions,k=c.get(this.id+"-actionSet"),o="",m;n.actionParams={};for(var l=0,s=j.length;l<s;l++){o+=this.renderAction(j[l],n)}k.innerHTML=YAHOO.lang.substitute(o,this.getActionUrls(n));c.addClass(k,"action-set");c.setStyle(k,"visibility","visible");var r=function p(u,t){var i=YAHOO.Bubbling.getOwnerByTagName(t[1].anchor,"div");if(i!==null){var v=i.title;if(typeof q[v]=="function"){t[1].stop=true;q[v].call(q,q.recordData,i)}}return true};YAHOO.Bubbling.addDefaultAction("action-link",r);this.modules.actions=new Alfresco.module.DoclibActions()},_onActionDeleteConfirm:function d(l){var m=l.location.path,h=l.displayName,k=new Alfresco.util.NodeRef(l.nodeRef),n=Alfresco.util.isValueSet(this.options.siteId)?"documentlibrary":"repository",j=m.length>1?"?path="+encodeURIComponent(m):"";this.modules.actions.genericAction({success:{callback:{fn:function i(o){window.location=f(n+j)}}},failure:{message:this.msg("message.delete.failure",h)},webscript:{method:Alfresco.util.Ajax.DELETE,name:"file/node/{nodeRef}",params:{nodeRef:k.uri}}})},doRefresh:function b(){YAHOO.Bubbling.unsubscribe("filesPermissionsUpdated",this.doRefresh);this.refresh("components/folder-details/folder-actions?nodeRef={nodeRef}"+(this.options.siteId?"&site={siteId}":""))}},true)})();