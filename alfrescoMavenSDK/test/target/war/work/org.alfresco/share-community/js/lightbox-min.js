var loadingImage=Alfresco.constants.URL_RESCONTEXT+"components/images/lightbox/loading.gif";var closeButton=Alfresco.constants.URL_RESCONTEXT+"components/images/lightbox/close.gif";function getPageScroll(){var a;if(self.pageYOffset){a=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else{if(document.body){a=document.body.scrollTop}}}arrayPageScroll=new Array("",a);return arrayPageScroll}function getPageSize(){var c,a;if(window.innerHeight&&window.scrollMaxY){c=document.body.scrollWidth;a=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){c=document.body.scrollWidth;a=document.body.scrollHeight}else{c=document.body.offsetWidth;a=document.body.offsetHeight}}var b,d;if(self.innerHeight){b=self.innerWidth;d=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){b=document.documentElement.clientWidth;d=document.documentElement.clientHeight}else{if(document.body){b=document.body.clientWidth;d=document.body.clientHeight}}}if(a<d){pageHeight=d}else{pageHeight=a}if(c<b){pageWidth=b}else{pageWidth=c}arrayPageSize=new Array(pageWidth,pageHeight,b,d);return arrayPageSize}function pause(b){var a=new Date();var c=a.getTime()+b;while(true){a=new Date();if(a.getTime()>c){return}}}function getKey(a){if(a==null){keycode=event.keyCode}else{keycode=a.which}key=String.fromCharCode(keycode).toLowerCase();if(key=="x"){hideLightbox()}}function listenKey(){document.onkeypress=getKey}function showLightbox(c){var h=document.getElementById("overlay");var b=document.getElementById("lightbox");var e=document.getElementById("lightboxCaption");var j=document.getElementById("lightboxImage");var a=document.getElementById("loadingImage");var g=document.getElementById("lightboxDetails");var f=getPageSize();var d=getPageScroll();if(a){a.style.top=(d[1]+((f[3]-35-a.height)/2)+"px");a.style.left=(((f[0]-20-a.width)/2)+"px");a.style.display="block"}h.style.height=(f[1]+"px");h.style.display="block";imgPreload=new Image();imgPreload.onload=function(){j.src=c.href||c.src;var m=d[1]+((f[3]-35-imgPreload.height)/2);var k=((f[0]-20-imgPreload.width)/2);b.style.top=(m<0)?"0px":m+"px";b.style.left=(k<0)?"0px":k+"px";b.style.minWidth="128px";g.style.minWidth="128px";g.style.width=imgPreload.width+"px";var l=c.title;if(!l&&c.getAttribute){l=c.getAttribute("title")}if(l){e.style.display="block";e.innerHTML=l}else{e.style.display="none"}if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250)}if(a){a.style.display="none"}selects=document.getElementsByTagName("select");for(i=0;i!=selects.length;i++){selects[i].style.visibility="hidden"}b.style.display="block";f=getPageSize();h.style.height=(f[1]+"px");listenKey();return false};imgPreload.src=c.href||c.src}function hideLightbox(){objOverlay=document.getElementById("overlay");objLightbox=document.getElementById("lightbox");objOverlay.style.display="none";objLightbox.style.display="none";selects=document.getElementsByTagName("select");for(i=0;i!=selects.length;i++){selects[i].style.visibility="visible"}document.onkeypress=""}function initLightbox(){var m=document.getElementsByTagName("body").item(0);var l=document.createElement("div");l.setAttribute("id","overlay");l.onclick=function(){hideLightbox();return false};l.style.display="none";l.style.position="absolute";l.style.top="0";l.style.left="0";l.style.zIndex="90";l.style.width="100%";m.insertBefore(l,m.firstChild);var e=getPageSize();var f=getPageScroll();var g=new Image();g.onload=function(){var o=document.createElement("a");o.setAttribute("href","#");o.onclick=function(){hideLightbox();return false};l.appendChild(o);var n=document.createElement("img");n.src=loadingImage;n.setAttribute("id","loadingImage");n.style.position="absolute";n.style.zIndex="150";o.appendChild(n);g.onload=function(){};return false};g.src=loadingImage;var b=document.createElement("div");b.setAttribute("id","lightbox");b.style.display="none";b.style.position="absolute";b.style.zIndex="100";m.insertBefore(b,l.nextSibling);var c=document.createElement("a");c.setAttribute("href","#");c.setAttribute("title","Click to close");c.onclick=function(){hideLightbox();return false};b.appendChild(c);var h=new Image();h.onload=function(){var n=document.createElement("img");n.src=closeButton;n.setAttribute("id","closeButton");n.style.position="absolute";n.style.zIndex="200";c.appendChild(n);return false};h.src=closeButton;var k=document.createElement("img");k.setAttribute("id","lightboxImage");c.appendChild(k);var j=document.createElement("div");j.setAttribute("id","lightboxDetails");b.appendChild(j);var d=document.createElement("div");d.setAttribute("id","lightboxCaption");d.style.display="none";j.appendChild(d);var a=document.createElement("div");a.setAttribute("id","keyboardMsg");a.innerHTML='press <a href="#" onclick="hideLightbox(); return false;"><kbd>x</kbd></a> to close';j.appendChild(a)}function addLoadEvent(a){var b=window.onload;if(typeof window.onload!="function"){window.onload=a}else{window.onload=function(){b();a()}}}addLoadEvent(initLightbox);